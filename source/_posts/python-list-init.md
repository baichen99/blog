---
title: python数组初始化问题
date: 2021-06-11 13:23:39
tags:
- python
categories:
- python
---

## 引言

在一个项目中，我想初始化一个mxn的二维数组，于是我使用这段代码初始化：

```python
arr = [[] * 10]
```

但发现arr的值为`[[]]`，并不是我们期望的`[[], [], ..., []]`，这是为什么呢？

对照一维数组的初始化方式，于是我换了一种初始化的方式：

```python
arr = [[]] * 10
```

结果为`[[], [], [], [], [], [], [], [], [], []]`正如我们预料的那样。

于是我们创建一个5x3的列表试试：

```python
arr = [[0] * 3] * 5
arr[0][0] = 1
```

修改第一个值后却发现其他值也改变了：

```
>>> arr
[[1, 0, 0], [1, 0, 0], [1, 0, 0], [1, 0, 0], [1, 0, 0]]
```

这是为什么呢？

这是因为这样操作的意思实际上是对于`[0] * 5`的一维列表复制了5次。也就是说，当我更改其中的任意一个的时候，其实是对b列表中的5个子列表全部修改了。

## 解释

这涉及到深拷贝和浅拷贝的问题，参看之前的笔记。

在[这个网站](http://pythontutor.com/live.html#mode=edit)上可以可视化列表在内存中的储存形式。

我们对

```python
arr1 = [0] * 5
arr2 = [[0]*5]*3
```

进行可视化:

![](https://raw.githubusercontent.com/baichen99/pics/master/img/%E6%88%AA%E5%B1%8F2021-06-11%20%E4%B8%8B%E5%8D%881.41.55.png)

这样就很清晰了。

## 参考

[二维列表(list)初始化](https://blog.csdn.net/weixin_43216017/article/details/89683873)

