---
title: 二叉树、B-树的一些性质
date: 2021-08-04 15:16:58
tags:
- 数据结构
- 树
- 二叉树
- B树
- B-tree
categories:
-  数据结构
- 考研
mathjax: true
---

## 树

#### 基本性质

- 节点数 = 总度数 + 1
- 度为m的树，第i层**最多**有$1 \times m \times m^{2} ... = m^{i-1}$个节点
- 高度为h的m叉树**最多**有$1+m+m^{2}+... = \frac{m^{h} - 1}{m-1}$​​

##### 求n个节点m叉树的最小高度

1. 高度最小，肯定为完全m叉树，$0 < h层节点个数 < m^{h-1} $ 

2. 所以$1+m+...+m^{h-2} < n \le 1+m+...+m^{h-1} $​​​

3. $ \frac{m^{h-1}-1}{m-1} < n \le \frac{m^{h}-1}{m-1} $​

4. $  m^{h-1} < n(m-1)+1 \le m^h $​​

5. $h-1< log_m[n(m-1)] \le h$​​
6. 最小高度为$h = \lceil log_{m}[n(m-1) + 1]  \rceil $​​​​​

#### 顺序存储的m叉树

若从1开始编号，对于节点i有以下性质：

- 双亲节点编号为$\lfloor \frac{i-2}{m} \rfloor + 1$​

  >节点i的第一个孩子节点编号=上一个节点编号+m个孩子的个数+1+1，所以j=(i-1)*m+2

- 第k个孩子编号为$(i-1)m+k+1$

  >由上述可知，第1个子女编号j=(i-1)*m+2，所以第k个孩子编号为(i-1)m+k+1

- 所在层数为$\lfloor log_2i \rfloor + 1$

## 二叉树

#### 基本性质

- $n_0 = n_2 + 1$​
- 高度为h的二叉树**最多**有$m^{h} - 1$​​个节点（满二叉树）

- n个节点的二叉树（完全二叉树）最小高度为$h = \lceil log_{m}n(m-1)  \rceil$​​

#### 顺序存储的二叉树

若从1开始编号，对于节点i有以下性质：

- 双亲节点编号为$\lfloor \frac{i}{2} \rfloor$

- 左孩子编号为2i
- 右孩子编号为2i+1
- 所在层数为$\lfloor log_2i \rfloor + 1$

## B树

#### 基本性质

设有m阶B树，设$k = \lceil \frac{m}{2} \rceil$

关键字数的取值范围：

- 根结点 $\in [1, m-1]$
- 其他 $\in [k-1, m-1]$

结点数/分支数的取值范围：

- 根结点 $\in [2, m]$
- 其他 $\in [k, m]$

#### 最大最小高度

根据以上基本性质，可推导出给定关键字数$n$下的最大和最小高度

**最大高度推导：**

关键字数一定，想要高度最大，则每个结点的关键字数是最少的，这样高度就能尽可能大，这样每层的关键字数如下



| 层数 |   节点数   |       关键字数        |
| :--: | :--------: | :-------------------: |
|  1   |     1      |      $1\times1$       |
|  2   |     2      |    $2\times(k-1)$     |
|  3   |     2k     |    $2k\times(k-1)$    |
|  h   | $2k^{h-2}$ | $2k^{h-2}\times(k-1)$ |

求和算出关键字数为：$n \ge 1 + 2(k-1)\sum_{i=2}^{h}k^{i-2} =  2k^{h-1} - 1$

根据此公式可算出最大高度

**最小高度推导：**

关键字数一定，想要高度最小，则每个结点的关键字数是最多的，这样高度就能尽可能小，这样每层的关键字数如下

| 层数 |  节点数   |
| :--: | :-------: |
|  1   |     1     |
|  2   |     m     |
|  3   |   $m^2$   |
|  h   | $m^{h-1}$ |

每个结点数，关键字数都为最多，即$m-1$个。

则$n \le (m-1)(1+m+m^2+...+m^h) = m^h -1$

推出$h \ge log_m(n+1)$

给定高度求结点数的最大最小值：

> 高度为5的3阶树至少有（）个结点，至多有（）个结点

节点数最少，即每个结点的子树数最少：

根据 结点数/分支数的取值范围可知3阶B树

- 根结点 $\in [2, 3]$
- 其他 $\in [2, 3]$

这样结点最少，有$(1 + 2 + 2^2 + ... + 2^4) = 2^5 -1 = 31$

节点数最多，即每个结点的子树数最多：

结点最多有$(1 + 3 + 3^2 + ... + 3^4) = （3^5 -1）/（3-1） = 121$

#### 总结

不管出什么题都是有基本性质推导的，最大最小高度的性质记住，其他的可以现推。