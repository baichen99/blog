---
title: cache映射方法
date: 2021-06-30 21:20:43
tags:
- cache
- 映射
- 计算机组成原理
categories:
- 计算机组成原理
- 考研
---

**给定主存地址，如何访存？**

## 直接映射

eg：主存地址空间大小为256MB，按字节编址，数据cache有8个cache行，行长64B。

- 确定主存地址位数：$256M = 2^{28}$，所以有28位

对于直接映射，主存结构如下：

| 标记 | cache行号 | 行内地址 |
| :--: | :-------: | :------: |

- 行长$64B = 2^6B$，说明行内地址占6位
- cache有$8=2^3个$，所以cache行号占3位
- **标记位数有两种计算方式，一是$28-6-3=19位$，二是用主存容量/cache容量得到，$256MB/(64B*8) = 2^{19}$，所以有19位**
- 因此，给定一个主存地址，可以将其分为三部分，根据这三部分来寻址，步骤如下：
  1. 根据行号找到cache对应行，检查标记与cache行标记是否一致
  2. 若一致，且有效位为1，则命中
  3. 若不一致或有效位为0，则不命中

